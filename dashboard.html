<!doctype html>
<html lang="fr">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Groupe Motard — Accueil</title>
  <link rel="stylesheet" href="./dashboard.css">
</head>

<body>
  <!-- Background fx -->
  <div class="bg-fx" aria-hidden="true"></div>

  <header class="topbar">
    <div class="brand">
      <div class="brand__logo" aria-hidden="true"></div>
      <div class="brand__text">
        <div class="brand__name">GROUPE MOTARD</div>
        <div class="brand__tag">Rouge • Noir • Respect</div>
      </div>
    </div>

    <div class="topbar__right">
      <div class="chip" id="whoChip">Connecté: <span id="who">—</span></div>
      <button class="btn btn--ghost" id="logoutBtn" type="button">Se déconnecter</button>
    </div>
  </header>

  <div class="layout">
    <aside class="sidebar">
      <button class="nav-item is-active" data-target="pointage">
        <span class="dot"></span> Pointage
      </button>
      <button class="nav-item" data-target="cotisation">
        <span class="dot"></span> Cotisation
      </button>
      <button class="nav-item" data-target="grades">
        <span class="dot"></span> Évolution des grades
      </button>
      <button class="nav-item" data-target="absence">
        <span class="dot"></span> Absence
      </button>
      <button class="nav-item" data-target="hierarchie">
        <span class="dot"></span> Hiérarchie + table
      </button>
      <button class="nav-item" data-target="annonces">
        <span class="dot"></span> Annonce
      </button>
      <button class="nav-item" data-target="membres">
        <span class="dot"></span> Membres du groupe
      </button>

      <div class="sidebar__footer">
        <div class="small muted">Version: v1</div>
        <div class="small muted">⚠️ Privé — accès réservé</div>
      </div>
    </aside>

    <main class="content">
      <!-- POINTAGE -->
      <section class="panel is-visible" id="pointage">
        <div class="panel__head">
          <h1>Pointage</h1>
          <p class="muted">Valider la présence aux runs / réunions.</p>
        </div>

        <div class="grid-2">
          <div class="card">
            <h2>Marquer ma présence</h2>
            <div class="row">
              <input class="input" id="presenceDate" type="date" />
              <button class="btn" id="presenceBtn" type="button">Présent</button>
            </div>
            <p class="small muted">Astuce: on peut plus tard connecter ça à une vraie base Supabase.</p>
          </div>

          <div class="card">
            <h2>Historique (exemple)</h2>
            <div class="list">
              <div class="list__item"><span>Run du vendredi</span><span class="pill pill--ok">Présent</span></div>
              <div class="list__item"><span>Réunion</span><span class="pill pill--warn">En retard</span></div>
              <div class="list__item"><span>Sortie dimanche</span><span class="pill pill--bad">Absent</span></div>
            </div>
          </div>
        </div>
      </section>

      <!-- COTISATION -->
      <section class="panel" id="cotisation">
        <div class="panel__head">
          <h1>Cotisation</h1>
          <p class="muted">Suivi des cotisations du groupe.</p>
        </div>

        <div class="grid-2">
          <div class="card">
            <h2>Ajouter un paiement</h2>
            <div class="stack">
              <input class="input" placeholder="Montant (€)" inputmode="decimal" />
              <input class="input" placeholder="Motif (ex: caisse, patch...)" />
              <button class="btn" type="button">Enregistrer</button>
            </div>
          </div>
          <div class="card">
            <h2>Résumé</h2>
            <div class="kpis">
              <div class="kpi">
                <div class="kpi__label">Total ce mois</div>
                <div class="kpi__value">240€</div>
              </div>
              <div class="kpi">
                <div class="kpi__label">En attente</div>
                <div class="kpi__value">3</div>
              </div>
              <div class="kpi">
                <div class="kpi__label">Caisse</div>
                <div class="kpi__value">1 520€</div>
              </div>
            </div>
            <p class="small muted">Ces chiffres sont des exemples (placeholder).</p>
          </div>
        </div>
      </section>

      <!-- GRADES -->
      <section class="panel" id="grades">
        <div class="panel__head">
          <h1>Évolution des grades</h1>
          <p class="muted">Suivi des promotions / périodes d’essai.</p>
        </div>

        <div class="card">
          <h2>Chemin de progression (exemple)</h2>
          <div class="timeline">
            <div class="step is-done"><span class="step__dot"></span><div><b>Prospect</b><div class="muted small">Découverte / règles</div></div></div>
            <div class="step is-done"><span class="step__dot"></span><div><b>Rookie</b><div class="muted small">Présences + comportement</div></div></div>
            <div class="step is-current"><span class="step__dot"></span><div><b>Member</b><div class="muted small">Officiel</div></div></div>
            <div class="step"><span class="step__dot"></span><div><b>Officer</b><div class="muted small">Responsabilités</div></div></div>
          </div>
        </div>
      </section>

      <!-- ABSENCE -->
      <section class="panel" id="absence">
        <div class="panel__head">
          <h1>Absence</h1>
          <p class="muted">Déclarer une absence / un empêchement.</p>
        </div>

        <div class="grid-2">
          <div class="card">
            <h2>Déclarer</h2>
            <div class="stack">
              <input class="input" type="date" />
              <select class="input">
                <option>Type d’absence</option>
                <option>Maladie</option>
                <option>Travail</option>
                <option>Famille</option>
                <option>Autre</option>
              </select>
              <textarea class="input" rows="4" placeholder="Message (optionnel)"></textarea>
              <button class="btn" type="button">Envoyer</button>
            </div>
          </div>

          <div class="card">
            <h2>Absences récentes</h2>
            <div class="list">
              <div class="list__item"><span>Alex — 2026-02-03</span><span class="pill pill--warn">Travail</span></div>
              <div class="list__item"><span>Mina — 2026-02-07</span><span class="pill pill--bad">Maladie</span></div>
            </div>
          </div>
        </div>
      </section>

      <!-- HIERARCHIE + TABLE -->
      <section class="panel" id="hierarchie">
        <div class="panel__head">
          <h1>Hiérarchie + position de table</h1>
          <p class="muted">Organisation interne + plan de table.</p>
        </div>

        <div class="grid-2">
          <div class="card">
            <h2>Hiérarchie (exemple)</h2>
            <div class="list">
              <div class="list__item"><span>Président</span><span class="pill">1</span></div>
              <div class="list__item"><span>Vice-président</span><span class="pill">1</span></div>
              <div class="list__item"><span>Trésorier</span><span class="pill">1</span></div>
              <div class="list__item"><span>Officers</span><span class="pill">3</span></div>
              <div class="list__item"><span>Members</span><span class="pill">12</span></div>
            </div>
          </div>

          <div class="card">
            <h2>Plan de table</h2>
            <div class="table-map">
              <div class="seat seat--head">Président</div>
              <div class="seat">Officer</div>
              <div class="seat">Member</div>
              <div class="seat">Member</div>
              <div class="seat">Trésorier</div>
              <div class="seat">Vice-président</div>
              <div class="seat">Member</div>
              <div class="seat">Member</div>
            </div>
            <p class="small muted">On pourra rendre ça éditable plus tard.</p>
          </div>
        </div>
      </section>

      <!-- ANNONCES -->
      <section class="panel" id="annonces">
        <div class="panel__head">
          <h1>Annonces</h1>
          <p class="muted">Infos importantes du groupe.</p>
        </div>

        <div class="grid-2">
          <div class="card">
            <h2>Nouvelle annonce</h2>
            <div class="stack">
              <input class="input" placeholder="Titre" />
              <textarea class="input" rows="5" placeholder="Message..."></textarea>
              <button class="btn" type="button">Publier</button>
            </div>
          </div>

          <div class="card">
            <h2>Dernières annonces</h2>
            <div class="post">
              <div class="post__title">Run de samedi — 14h</div>
              <div class="post__meta">Posté par Admin • il y a 2h</div>
              <div class="post__body">Rendez-vous au point habituel. Plein fait + équipements.</div>
            </div>
            <div class="post">
              <div class="post__title">Cotisation patch</div>
              <div class="post__meta">Posté par Trésorier • hier</div>
              <div class="post__body">Merci de régler avant fin de semaine.</div>
            </div>
          </div>
        </div>
      </section>

      <!-- MEMBRES -->
      <section class="panel" id="membres">
        <div class="panel__head">
          <h1>Membres du groupe</h1>
          <p class="muted">Qui est dans notre groupe (nom, prénom, grade, photo).</p>
        </div>

        <div class="card">
          <div class="row">
            <input class="input" id="searchMember" placeholder="Rechercher un membre..." />
            <button class="btn btn--ghost" id="addMemberBtn" type="button">+ Ajouter</button>
          </div>

          <div class="members" id="membersGrid">
            <!-- cartes générées en JS -->
          </div>

          <p class="small muted">Photos: pour l’instant c’est un placeholder, on pourra stocker les vraies images plus tard (Supabase Storage).</p>
        </div>
      </section>
    </main>
  </div>

  <script>
    // NAV: switch panels
    const navItems = document.querySelectorAll('.nav-item');
    const panels = document.querySelectorAll('.panel');
    navItems.forEach(btn => {
      btn.addEventListener('click', () => {
        navItems.forEach(b => b.classList.remove('is-active'));
        btn.classList.add('is-active');
        const target = btn.dataset.target;
        panels.forEach(p => p.classList.toggle('is-visible', p.id === target));
      });
    });

    // Demo members data (à brancher plus tard sur Supabase)
    const members = [
      { username: "Shadow", first: "Alex", last: "Durand", grade: "Officer" },
      { username: "Raven",  first: "Mina", last: "Leroy", grade: "Member" },
      { username: "Torque", first: "Sam",  last: "Benali", grade: "Prospect" },
      { username: "Blaze",  first: "Nico", last: "Martin", grade: "Member" },
      { username: "Viper",  first: "Léo",  last: "Petit", grade: "Rookie" },
    ];

    const membersGrid = document.getElementById('membersGrid');
    const searchMember = document.getElementById('searchMember');

    function renderMembers(filter = "") {
      membersGrid.innerHTML = "";
      const q = filter.trim().toLowerCase();
      members
        .filter(m => !q || (m.username + " " + m.first + " " + m.last + " " + m.grade).toLowerCase().includes(q))
        .forEach(m => {
          const card = document.createElement('div');
          card.className = 'member-card';
          card.innerHTML = `
            <div class="avatar" aria-hidden="true">${m.username.slice(0,1).toUpperCase()}</div>
            <div class="member-card__info">
              <div class="member-card__name">${m.first} ${m.last}</div>
              <div class="member-card__meta">@${m.username} • <span class="grade">${m.grade}</span></div>
            </div>
            <button class="tiny" type="button">Voir</button>
          `;
          membersGrid.appendChild(card);
        });
    }

    searchMember.addEventListener('input', (e) => renderMembers(e.target.value));
    renderMembers();

    // Pointage demo
    document.getElementById('presenceBtn').addEventListener('click', () => {
      const d = document.getElementById('presenceDate').value || "(date non choisie)";
      alert("Présence enregistrée pour: " + d);
    });

    // (Option) ici tu brancheras la déconnexion Supabase
    document.getElementById('logoutBtn').addEventListener('click', () => {
      // plus tard: supabase.auth.signOut()
      window.location.href = "index.html";
    });

    // placeholder user name
    document.getElementById('who').textContent = "Motard";
  </script>
</body>
</html>



